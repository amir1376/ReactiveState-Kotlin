ext {
    secrets = new Properties()
}

def _secretsFile = file("$rootDir/secrets.properties")
if (_secretsFile.exists()) {
    _secretsFile.withInputStream { ext.secrets.load(it) }
}

for (key in ["bintray.username", "bintray.apikey"]) {
    if (hasProperty(key) && !secrets.hasProperty(key)) {
        secrets.setProperty(key, getProperty(key))
    }
}
